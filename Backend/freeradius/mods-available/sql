# SQL Module Configuration for PostgreSQL
sql {
    driver = "rlm_sql_postgresql"
    
    dialect = "postgresql"
    
    # Connection info - use environment variables
    server = "${env:DB_HOST:-postgres}"
    port = ${env:DB_PORT:-5432}
    login = "${env:DB_USER:-postgres}"
    password = "${env:DB_PASSWORD:-cvkcvk12}"
    radius_db = "${env:DB_NAME:-rtrwnet_saas}"
    
    # Connection pool
    pool {
        start = 5
        min = 4
        max = 32
        spare = 3
        uses = 0
        retry_delay = 30
        lifetime = 0
        idle_timeout = 60
    }
    
    # Query configuration
    read_clients = yes
    client_table = "radius_nas"
    
    # Table names
    acct_table1 = "radacct"
    acct_table2 = "radacct"
    postauth_table = "radpostauth"
    authcheck_table = "radcheck"
    groupcheck_table = "radgroupcheck"
    authreply_table = "radreply"
    groupreply_table = "radgroupreply"
    usergroup_table = "radusergroup"
    
    # Remove stale session
    delete_stale_sessions = yes
    
    # SQL queries directory
    $INCLUDE ${modconfdir}/${.:name}/main/${dialect}/queries.conf
    
    # Logging
    logfile = ${logdir}/sqllog.sql
}
