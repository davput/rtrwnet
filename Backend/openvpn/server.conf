# OpenVPN Server - MikroTik Compatible (Username/Password Auth)
port 1194
proto udp
dev tun

# Server network
server 10.8.0.0 255.255.255.0
topology subnet

# Certificates (server only - clients use username/password)
ca /etc/openvpn/pki/ca.crt
cert /etc/openvpn/pki/server.crt
key /etc/openvpn/pki/server.key
dh /etc/openvpn/pki/dh.pem

# Username/Password authentication
auth-user-pass-verify /etc/openvpn/auth-user.sh via-env
script-security 3
username-as-common-name

# NO client certificate required - CRITICAL for MikroTik
verify-client-cert none

# Security - MikroTik compatible settings
cipher AES-256-CBC
data-ciphers AES-256-CBC
auth SHA256

# TLS settings for MikroTik compatibility
tls-server
tls-version-min 1.0
tls-cipher DEFAULT

# Performance
keepalive 10 120
persist-key
persist-tun

# Logging
status /var/log/openvpn/status.log 10
log-append /var/log/openvpn/openvpn.log
verb 4

# Don't drop privileges (needed for auth script)
# user nobody
# group nogroup

# Client settings
push "route 10.8.0.0 255.255.255.0"
push "dhcp-option DNS 8.8.8.8"
push "dhcp-option DNS 8.8.4.4"

# Allow multiple clients with same username
duplicate-cn

# Client-to-client
client-to-client

# Max clients
max-clients 100

# Float - allow client IP to change
float

# Compatibility mode
comp-lzo no
push "comp-lzo no"
